# OldboyApp Auth MVP 开发与部署说明

## 功能点与设计原理
1. 注册：邮箱验证码 + 用户名/邮箱唯一校验 + 强密码规则（后端强校验）
2. 登录：图形验证码校验后再做用户名密码认证，成功后使用 Django Session 维持登录态
3. 忘记密码：邮箱验证码校验通过后重置密码，规则与注册一致
4. 上传：登录态校验后把文件直接上传 COS，数据库记录 key/url 元信息
5. 风控：验证码有效期、邮箱和 IP 发码限流、每日发码次数限制（Redis）

## 技术栈
- 后端：Django 5 + DRF + Redis + MariaDB + COS SDK
- 前端：Vue3 + Vite + Element Plus + Axios + Pinia + Router
- 部署：Docker Compose + Nginx（HTTPS）

## 本地测试结果
- 后端 `python manage.py check` 通过
- 接口链路通过：注册、获取验证码、登录、`/auth/me`、重置密码
- 前端 `npm run build` 通过

## Clawbot 部署指令模板
把以下内容直接发给 Clawbot：

```text
在服务器 /root/.openclaw/workspace/oldboyapp 执行部署：
1) git pull origin main
2) cd deploy
3) [ -f env.prod ] || cp env.prod.example env.prod
4) 确认 env.prod 已填真实密钥（DB/SMTP/COS）
5) docker compose --env-file env.prod up -d --build
6) docker compose --env-file env.prod exec backend python manage.py migrate
7) 健康检查：
   - curl -sS https://www.oldboyai.com/api/v1/healthz
   - curl -I https://www.oldboyai.com
8) 把每一步输出与失败原因回传给我。
```
